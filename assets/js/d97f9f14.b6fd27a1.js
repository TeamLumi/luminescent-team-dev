"use strict";(self.webpackChunkluminescent_team=self.webpackChunkluminescent_team||[]).push([[59909],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(a),d=r,h=c["".concat(s,".").concat(d)]||c[d]||u[d]||i;return a?n.createElement(h,o(o({ref:t},m),{},{components:a})):n.createElement(h,o({ref:t},m))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},41678:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_position:3},o="Setting Up Starlight",l={unversionedId:"exefs/starlight",id:"exefs/starlight",title:"Setting Up Starlight",description:"Introduction",source:"@site/rom-hacking/exefs/starlight.md",sourceDirName:"exefs",slug:"/exefs/starlight",permalink:"/luminescent-team-dev/rom-hacking/exefs/starlight",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"ROMHackingSidebar",previous:{title:"Setting Up Ghidra",permalink:"/luminescent-team-dev/rom-hacking/exefs/ghidra"},next:{title:"Headers",permalink:"/luminescent-team-dev/rom-hacking/exefs/headers"}},s={},p=[{value:"Introduction",id:"introduction",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Setting Up the Enviroment",id:"setting-up-the-enviroment",level:2},{value:"Connecting with Visual Studio Code",id:"connecting-with-visual-studio-code",level:2}],m={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"setting-up-starlight"},"Setting Up Starlight"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Starlight is a modding template that allows us to take advantage of IPS Patches to inject new c/c++ code into the exefs with minimal knowledge of ARM OpCodes.\nSo far this has only been tested with Linux and WSL, if you get it working on native windows feel free to update this.\nThis guide assumes you're using Windows Subsystem for Linux. The set up is pretty straightforward, if you can use a linux operating system you can probably work out how to get it going on your own."),(0,r.kt)("h2",{id:"requirements"},"Requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Windows Subsystem for Linux (WSL/WSL2)"),(0,r.kt)("li",{parentName:"ul"},"A Linux build in WSL"),(0,r.kt)("li",{parentName:"ul"},"I recommend ",(0,r.kt)("a",{parentName:"li",href:"https://aka.ms/terminal"},"Windows Terminal")," too (This is installed by default in Windows 11)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://devkitpro.org/"},"devkitPro")),(0,r.kt)("li",{parentName:"ul"},"Python"),(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("a",{parentName:"li",href:"https://www.keystone-engine.org/"},"Keystone-Engine")," Python Module"),(0,r.kt)("li",{parentName:"ul"},"CMake"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Martmists-GH/BDSP.git"},"The Starlight Template"))),(0,r.kt)("h2",{id:"setting-up-the-enviroment"},"Setting Up the Enviroment"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install/Enable WSL. It is enabled by default on newer builds of windows but if not simply run this command in Powershell as an administrator."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"wsl --install\n")),(0,r.kt)("p",{parentName:"li"},"I also recommend using WSL2 as it has some extra features. New installs should use this by default but if you're still on WSL1 use this command to upgrade.  "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"wsl --set-default-version 2\n")),(0,r.kt)("p",{parentName:"li"},"See ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/windows/wsl/install"},"This Microsoft Article")," for more info")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install a Linux build. I prefer Ubuntu as it has a lot of community support.  "),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"You can either install it from the ",(0,r.kt)("a",{parentName:"p",href:"https://www.microsoft.com/p/ubuntu/9pdxgncfsczv"},"Microsoft Store Page")," or install it with a Powershell command  "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-powershell"},"wsl --install -d Ubuntu\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Once Installed, Open/Run it from the start menu, the store page, or from within Terminal and set up your account.")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install devkitPro tools and libraries in Ubuntu"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Follow the instructions on this page to install ",(0,r.kt)("a",{parentName:"p",href:"https://devkitpro.org/wiki/devkitPro_pacman"},"devkitPro Pacman"),"  "),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://apt.devkitpro.org/install-devkitpro-pacman\nchmod +x ./install-devkitpro-pacman\nsudo ./install-devkitpro-pacman\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the ",(0,r.kt)("inlineCode",{parentName:"p"},"switch-dev")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"switch-portlibs")," package groups using devkitPro Pacman. (While all the packages in these groups are not necessary, they are handy to have anyway)"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"```bash\nsudo dkp-pacman -Sy\nsudo dkp-pacman -S switch-dev\nsudo dkp-pacman -S switch-portlibs\n```\n")),(0,r.kt)("p",{parentName:"li"},"Once you have installed devkitPro you will need to log out and back in to Ubuntu to get it working. or run this command to make it work immediately."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"source /etc/profile.d/devkit-env.sh\n"))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install Python. Ubuntu should have ",(0,r.kt)("inlineCode",{parentName:"p"},"python3")," installed by default but not ",(0,r.kt)("inlineCode",{parentName:"p"},"pip"),". ",(0,r.kt)("inlineCode",{parentName:"p"},"python-is-python3")," is also handy to have."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update\nsudo apt install python-is-python3 pip\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install The Keystone-Engine Python Module"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip install keystone-engine\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install the latest version of ",(0,r.kt)("inlineCode",{parentName:"p"},"CMake"),"\nThe latest version is available from the ",(0,r.kt)("a",{parentName:"p",href:"https://apt.kitware.com/"},"kitware APT repo"),"."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt update\nsudo apt install -y software-properties-common lsb-release gpg wget apt-transport-https\nwget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | gpg --dearmor - | sudo tee /usr/share/keyrings/kitware-archive-keyring.gpg >/dev/null\necho 'deb [signed-by=/usr/share/keyrings/kitware-archive-keyring.gpg] https://apt.kitware.com/ubuntu/ $(lsb_release -cs) main' | sudo tee /etc/apt/sources.list.d/kitware.list >/dev/null\nsudo apt update\nsudo rm /usr/share/keyrings/kitware-archive-keyring.gpg\nsudo apt-get install kitware-archive-keyring\nsudo apt install cmake\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download the Starlight Template to your Ubuntu filesystem. Git is the easiest way."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/Martmists-GH/BDSP.git\n")))),(0,r.kt)("h2",{id:"connecting-with-visual-studio-code"},"Connecting with Visual Studio Code"),(0,r.kt)("p",null,"I prefer to use VSCode for pretty much everything as its very extensible with its plugins."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"To get started install ",(0,r.kt)("a",{parentName:"p",href:"https://code.visualstudio.com/download"},"VSCode here"),". We will then need to install a few plugins.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Next install the ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl"},"Remote - WSL")," extension.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"With this extension installed you can run ",(0,r.kt)("inlineCode",{parentName:"p"},"code .")," within your WSL Ubuntu console to open vscode to that location or click the double arrows in the bottom left of VSCode. The terminal in VSCode gives access to the WSL Terminal.  "))),(0,r.kt)("p",null,"Some extensions are installed locally and others in the WSL Context. You will need to install the ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools-extension-pack"},"C/C++ Extension Pack")," in the Remote WSL context."))}u.isMDXComponent=!0}}]);