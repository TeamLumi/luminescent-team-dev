"use strict";(globalThis.webpackChunkluminescent_team=globalThis.webpackChunkluminescent_team||[]).push([[815520],{28453(e,n,i){i.d(n,{R:()=>r,x:()=>c});var t=i(296540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}},352940(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"scripting/introduction","title":"Scripting introduction","description":"Scripting in BDSP allows you to influence different parts of the game.","source":"@site/rom-hacking/scripting/introduction.md","sourceDirName":"scripting","slug":"/scripting/introduction","permalink":"/luminescent-team-dev/rom-hacking/scripting/introduction","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Scripting Basics","permalink":"/luminescent-team-dev/rom-hacking/scripting/setup/scripting-guide"},"next":{"title":"PlaceData","permalink":"/luminescent-team-dev/rom-hacking/scripting/place-data"}}');var a=i(474848),s=i(28453);const r={},c="Scripting introduction",o={},l=[{value:"Functions",id:"functions",level:2},{value:"Naming schemes",id:"naming-schemes",level:3},{value:"Type",id:"type",level:4},{value:"Zone code",id:"zone-code",level:4},{value:"Function name",id:"function-name",level:4},{value:"Example function names",id:"example-function-names",level:4},{value:"Comments",id:"comments",level:3},{value:"How to make the game run your functions",id:"how-to-make-the-game-run-your-functions",level:3},{value:"Flags",id:"flags",level:2},{value:"Example",id:"example",level:3},{value:"PlaceData quirks",id:"placedata-quirks",level:2},{value:"Text output buffer",id:"text-output-buffer",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"scripting-introduction",children:"Scripting introduction"})}),"\n",(0,a.jsx)(n.p,{children:"Scripting in BDSP allows you to influence different parts of the game."}),"\n",(0,a.jsx)(n.p,{children:"Be it showing dialogues, moving NPCs and the player around and setting various flags to make the game work."}),"\n",(0,a.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,a.jsxs)(n.p,{children:["Functions are written in ",(0,a.jsx)(n.code,{children:".ev"})," files. These can be edited by unpacking the file ",(0,a.jsx)(n.code,{children:"romfs/Data/StreamingAssets/AssetAssistant/Dpr/ev_script"})," using ",(0,a.jsx)(n.a,{href:"https://github.com/Ai0796/BDSP-Repacker",children:"Aldo's BDSP Repacker"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Each zone has it's own script file. The name is the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"})," code. For example ",(0,a.jsx)(n.code,{children:"c01.ev"})," for Jubilife City."]}),"\n",(0,a.jsx)(n.p,{children:"These script files contain two different types of function that serve different purposes."}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Script functions"}),"\n",(0,a.jsx)(n.li,{children:"Animation functions"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"naming-schemes",children:"Naming schemes"}),"\n",(0,a.jsxs)(n.p,{children:["Function naming should follow this scheme: ",(0,a.jsx)(n.code,{children:"{type}_{zone_code}_{function_name}"}),"."]}),"\n",(0,a.jsx)(n.p,{children:"This is not strictly necessary, but strongly recommended to keep things organized."}),"\n",(0,a.jsx)(n.h4,{id:"type",children:"Type"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Description"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"ev"}),(0,a.jsxs)(n.td,{children:["Script functions called by ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"pos"}),(0,a.jsxs)(n.td,{children:["Script functions called by ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/stop-data",children:"StopData"})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"anm"}),(0,a.jsx)(n.td,{children:"Animation functions"})]})]})]}),"\n",(0,a.jsx)(n.h4,{id:"zone-code",children:"Zone code"}),"\n",(0,a.jsxs)(n.p,{children:["The zone code in lowercase letters. ",(0,a.jsx)(n.code,{children:"c01"})," for Jubilife City or ",(0,a.jsx)(n.code,{children:"r201"})," for Route 201."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zones"})," for a list of zones."]}),"\n",(0,a.jsx)(n.h4,{id:"function-name",children:"Function name"}),"\n",(0,a.jsx)(n.p,{children:"The actual name your function should have. Try to keep this as descriptive as possible, to make reading the code easier."}),"\n",(0,a.jsxs)(n.p,{children:["Something like ",(0,a.jsx)(n.code,{children:"cynthia_give_egg"})," or even just ",(0,a.jsx)(n.code,{children:"rival"})," if this is the rival talking function of the zone."]}),"\n",(0,a.jsx)(n.h4,{id:"example-function-names",children:"Example function names"}),"\n",(0,a.jsx)(n.p,{children:"Here are some example function names:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-c",children:"ev_c01_rival\r\nanm_c01_rival\r\npos_r207_galactic_blocker\n"})}),"\n",(0,a.jsx)(n.h3,{id:"comments",children:"Comments"}),"\n",(0,a.jsxs)(n.p,{children:["To make a comment, simply add a semicolon ",(0,a.jsx)(n.code,{children:";"})," and type your comment."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-c",children:"ev_c01_greet_player:; This function makes the professor greet the player\n"})}),"\n",(0,a.jsx)(n.h3,{id:"how-to-make-the-game-run-your-functions",children:"How to make the game run your functions"}),"\n",(0,a.jsx)(n.p,{children:"There are four main ways to make the game run your custom functions."}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Calling your function from a map script (usually defined in the ",(0,a.jsx)(n.code,{children:"sp_{zone_code}.ev"})," file)"]}),"\n",(0,a.jsxs)(n.li,{children:["Referencing your function name in the ",(0,a.jsx)(n.code,{children:"TalkLabel"})," of a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})]}),"\n",(0,a.jsxs)(n.li,{children:["Referencing your function name in the ",(0,a.jsx)(n.code,{children:"ContactLabel"})," of a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/stop-data",children:"StopData"})]}),"\n",(0,a.jsxs)(n.li,{children:["Calling your function from another function that's already in the script using a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/logic/jump",children:"_JUMP"})," or a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/logic/call",children:"_CALL"})," function"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"flags",children:"Flags"}),"\n",(0,a.jsxs)(n.p,{children:["Flags are a way to store various data about your game state. Flags can either be set (1) using ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-set",children:"_FLAG_SET"})," or reset (0) using ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-reset",children:"_FLAG_RESET"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.p,{children:"Here is an example of a legendary being fought, despawned and then made sure it is not encounterable again."}),"\n",(0,a.jsxs)(n.p,{children:["Part of the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})," of the legendary:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-c",children:'{\r\n    "ID": "C01_DARKRAI",\r\n    "zoneID": 0,\r\n    [...],\r\n    "TalkLabel": "ev_c01_darkrai",\r\n    "ContactLabel": "",\r\n    "Work": 3000,\r\n    [...]\r\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"The function that handles the Darkrai event:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-c",children:"ev_c01_darkrai:\r\n_SP_WILD_BTL_SET(491, 80); Fight Darkrai\r\n_OBJ_DEL('C01_DARKRAI'); Hide Darkrai - this also sets the flag 3000 for us\r\n_END()\n"})}),"\n",(0,a.jsx)(n.h2,{id:"placedata-quirks",children:"PlaceData quirks"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"Work"})," value of a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})," is only checked when entering the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["This means if you change the Flag state of a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})," in the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"})," you are currently in, this will not be effective until you exit and re-enter that ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["For example to make an object disappear in the future, starting the moment you are in the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"}),", you need to both set the Flag using ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-set",children:"_FLAG_SET"})," and ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/interface/obj-del",children:"_OBJ_DEL"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The same goes for ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-reset",children:"_FLAG_RESET"})," and ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/commands/interface/obj-add",children:"_OBJ_ADD"})," if you want to make a ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/scripting/place-data",children:"PlaceData"})," appear and make it stay even when the ",(0,a.jsx)(n.a,{href:"/luminescent-team-dev/rom-hacking/dictionary/zones",children:"Zone"})," is reloaded."]}),"\n",(0,a.jsx)(n.h2,{id:"text-output-buffer",children:"Text output buffer"}),"\n",(0,a.jsx)(n.p,{children:"There are different functions for displaying textboxes."}),"\n",(0,a.jsx)(n.p,{children:"Textboxes get their content from JSON-Files. This is done in Scripting."}),"\n",(0,a.jsx)(n.p,{children:"These JSON-Files house all the text used in the game and can be referenced whenever to get the text to display it in a textbox."}),"\n",(0,a.jsx)(n.p,{children:"Some texts have placeholder values. These can be replaced with any text from the buffer."}),"\n",(0,a.jsxs)(n.p,{children:["The easiest way is to use ",(0,a.jsx)(n.code,{children:"_MACRO_*"})," commands. If you use these, ev-as converts these into text for you. Depending on which Tags you use, you may need to manually edit the Tag list in the JSON-File."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);